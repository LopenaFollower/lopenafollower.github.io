<!DOCTYPE html>
<html>
	<head>
		<title></title>
		<meta name="viewport"content="width=device-width,initial-scale=1">
		<style>
			body{margin:0 0}
			div span{
				font-family:monospace;
				border:1px solid #000;
				display:inline-block;
				padding:10px;
			}
			#cvs{background:#000}
			fieldset{width:auto}
		</style>
	</head>
	<body>
		<canvas id=cvs></canvas><br>
		<fieldset>
			<legend>Options</legend>
			<table>
				<tr>
					<td>coords</td>
					<td id=coords></td>
				</tr>
				<tr>
					<td>Toggle</td>
					<td><input type=checkbox id=stbtn oninput='start=this.checked'/></td>
				</tr>
				<tr>
					<td></td>
					<td><button onclick="nextGen()">Step</button></td>
				</tr>
				<tr>
					<td>connected edges</td>
					<td><input type=checkbox checked id='cneds'/></td>
				</tr>
				<tr>
					<td></td>
					<td><button onclick="init()">Clear</button></td>
				</tr>
				<tr>
					<td>grid size</td>
					<td><input value=50 style='width:60px'oninput='set("gsz",parseInt(this.value))'/></td>
				</tr>
				<tr>
					<td>tick delay</td>
					<td><input value=100 style='width:60px'oninput='set("tps",parseInt(this.value))'/></td>
				</tr>
				<tr>
					<td>gens per tick</td>
					<td><input value=1 style='width:60px'oninput='set("gpt",parseInt(this.value))'/></td>
				</tr>
				<tr>
					<td>random set</td>
					<td><button onclick='init();loadset(0,0,0);'>load</button></td>
			</table>
		</fieldset>
		<script>
cvs.width=cvs.height=Math.min(screen.width,screen.height)|0;
window.onresize=function(){
	cvs.width=cvs.height=Math.min(screen.width,screen.height)|0;
}
window.onresize();
const ctx=cvs.getContext("2d");
let size=50;
let start=false;
let cells,tmp;
let instances=[];
let tickdelay=100;
let gens=1;
class Cell{
	constructor(x,y){this.x=x;this.y=y}
	countNeighbors(){
		let n=0,c=cneds.checked,{x,y}=this;
		var startPosX=x-1<0?(c?size-x:x):x-1;
		var startPosY=y-1<0?y:y-1;
		var endPosX=x+1>size-1?x:x+1;
		var endPosY=y+1>size-1?y:y+1;
		function check(tx,ty){
			let rx=tx,ry=ty;
			if(c){
				if(tx<0){
					rx=size-1;
				}
				if(ty<0){
					ry=size-1;
				}
				if(tx>size-1){
					rx=0;
				}
				if(ty>size-1){
					ry=0;
				}
			}else{
				if(tx<0||ty<0||tx>size-1||ty>size-1)return 0;
			}
			if(rx==x&&ry==y)return 0;
			return cells[ry][rx];
		}
		n+=check(x-1,y+1);
		n+=check(x,y+1)
		n+=check(x+1,y+1)
		n+=check(x-1,y);
		n+=check(x+1,y)
		n+=check(x-1,y-1);
		n+=check(x,y-1)
		n+=check(x+1,y-1)
		return n;
	}
	next(){
		let n=this.countNeighbors();
		let{x,y}=this;
		switch(true){
			case n==3:
				tmp[y][x]=1;
				break;
			case n==2:tmp[y][x]=cells[y][x];
		}
	}
}
const sets={
	"112P51":{
		width:41,
		height:41,
		build:[
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,1,0,1,0,0,0,0,0,1,0,1,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0],
			[0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,1,1,0,0,0,0,1,1,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,0,0,0,1,0,0,0,1,0,0,0,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,1,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,1,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0],
			[0,1,1,0,0,0,0,0,1,1,0,0,1,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1,1,0,0,1,1,0,0,0,0,0,1,1,0],
			[0,0,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,1,0,0,1,0,0,1,0,0,0,0],
			[1,0,0,1,1,0,0,0,1,0,1,0,0,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,0,0,1,0,1,0,0,0,1,1,0,0,1],
			[1,0,0,0,0,1,0,0,0,0,1,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,1],
			[0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0],
			[1,0,0,0,0,1,0,0,0,0,1,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,1],
			[1,0,0,1,1,0,0,0,1,0,1,0,0,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,0,0,1,0,1,0,0,0,1,1,0,0,1],
			[0,0,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,1,0,0,1,0,0,1,0,0,0,0],
			[0,1,1,0,0,0,0,0,1,1,0,0,1,1,0,0,0,1,0,0,0,0,0,1,0,0,0,1,1,0,0,1,1,0,0,0,0,0,1,1,0],
			[0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,1,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,1,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,1,0,0,0,1,1,0,0,0,1,0,0,0,1,0,0,0,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,1,1,0,0,0,0,1,1,0,0,0,0,0],
			[0,0,0,0,0,1,1,0,0,0,0,0,1,1,0,1,0,1,0,0,0,0,0,1,0,1,0,1,1,0,0,0,0,0,1,1,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
		]
	},
	"spacefiller":{
		width:49,
		height:26,
		build:[
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],
			[1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1],
			[1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1],
			[0,1,0,0,1,0,0,1,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,1,0,0,1,0,0,1,0],
			[0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0],
			[0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0],
			[0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0],
			[0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,1,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0],
			[1,0,0,0,0,0,0,0,0,1,0,0,0,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,0,0,0,1,0,0,0,0,0,0,0,0,1],
			[1,0,0,0,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,0,0,0,1],
			[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
		]
	},
	"P46GS":{
		width:32,
		height:32,
		build:[
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,0,0,1,1,0,0,0,0],
			[0,0,0,0,0,0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1],
			[0,0,0,1,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,0,1,1],
			[0,0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0],
			[0,0,0,1,0,0,1,0,0,0,0,1,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,1,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,1,1,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,1,0,0,1,0,0,0],
			[0,1,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,1,0,1,0,0],
			[1,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,0,1,0,0,0],
			[1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,0],
			[0,1,1,1,1,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,1,1,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
		]
	},
	"gosperGliderGun":{
		width:36,
		height:9,
		build:[
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1],
			[0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1],
			[1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[1,1,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,1,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
		]
	},
	"hammerhead":{
		width:18,
		height:16,
		build:[
			[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[1,0,0,0,0,1,0,0,0,0,0,0,0,1,1,0,0,0],
			[1,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,1],
			[0,1,0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,1],
			[0,0,0,1,1,0,0,0,1,1,0,1,1,0,0,1,1,0],
			[0,0,0,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0],
			[0,0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,0,0],
			[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,1,0,1,0,1,0,1,0,0,0,0,0],
			[0,0,0,0,0,1,0,0,0,0,1,0,0,1,0,0,0,0],
			[0,0,0,1,1,0,0,0,1,1,0,1,1,0,0,1,1,0],
			[0,1,0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,1],
			[1,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,1],
			[1,0,0,0,0,1,0,0,0,0,0,0,0,1,1,0,0,0],
			[1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0]
		]
	},
	"64P2H1V0":{
		width:31,
		height:8,
		build:[
			[0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0],
			[0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0],
			[0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,1,0,0,0],
			[0,0,1,0,1,0,1,1,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,1,1,0,1,0,1,0,0],
			[0,1,1,0,1,0,0,0,0,1,0,1,1,0,1,1,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0],
			[1,0,0,0,0,1,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,1,0,0,0,1,0,0,0,0,1],
			[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0],
			[1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,1,1]
		]
	},
	"pufferfish":{
		width:15,
		height:12,
		build:[
			[0,0,0,1,0,0,0,0,0,0,0,1,0,0,0],
			[0,0,1,1,1,0,0,0,0,0,1,1,1,0,0],
			[0,1,1,0,0,1,0,0,0,1,0,0,1,1,0],
			[0,0,0,1,1,1,0,0,0,1,1,1,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],
			[0,0,1,0,0,1,0,0,0,1,0,0,1,0,0],
			[1,0,0,0,0,0,1,0,1,0,0,0,0,0,1],
			[1,1,0,0,0,0,1,0,1,0,0,0,0,1,1],
			[0,0,0,0,0,0,1,0,1,0,0,0,0,0,0],
			[0,0,0,1,0,1,0,0,0,1,0,1,0,0,0],
			[0,0,0,0,1,0,0,0,0,0,1,0,0,0,0]
		]
	},
	"weekender":{
		width:16,
		height:11,
		build:[
			[0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0],
			[0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0],
			[1,0,1,0,0,0,0,0,0,0,0,0,0,1,0,1],
			[0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0],
			[0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0],
			[0,0,1,0,0,0,1,1,1,1,0,0,0,1,0,0],
			[0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0],
			[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0],
			[0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0]
		]
	},
	"42P10.3":{
		width:13,
		height:13,
		build:[
			[0,0,0,0,0,1,1,0,0,0,0,0,0],
			[0,0,0,0,1,0,0,1,0,0,0,0,0],
			[0,0,0,1,0,0,1,0,0,0,0,0,0],
			[0,0,1,0,1,1,0,1,1,1,0,0,0],
			[0,0,1,0,0,1,0,0,0,0,1,0,1],
			[0,0,0,1,0,0,0,1,0,1,0,1,1],
			[1,1,1,0,0,0,0,0,0,1,0,0,0],
			[1,0,0,1,1,1,1,1,0,1,0,0,0],
			[0,0,0,1,0,0,0,0,1,0,0,0,0],
			[0,0,0,0,1,1,1,1,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,1,1,0,0,0,0,0],
			[0,0,0,0,0,0,1,1,0,0,0,0,0]
		]
	},
	"galaxy":{
		width:13,
		height:13,
		build:[
			[0,0,0,0,1,1,0,0,0,0,0,0,0],
			[0,0,0,1,1,1,1,0,0,0,0,0,0],
			[0,0,1,0,1,1,0,1,1,0,1,0,0],
			[0,0,0,0,0,0,0,1,1,0,0,1,0],
			[0,0,1,1,0,0,1,1,0,0,1,1,1],
			[0,0,1,1,1,1,0,1,0,0,1,1,1],
			[0,1,0,0,1,0,0,0,1,0,0,1,0],
			[1,1,1,0,0,1,0,1,1,1,1,0,0],
			[1,1,1,0,0,1,1,0,0,1,1,0,0],
			[0,1,0,0,1,1,0,0,0,0,0,0,0],
			[0,0,1,0,1,1,0,1,1,0,1,0,0],
			[0,0,0,0,0,0,1,1,1,1,0,0,0],
			[0,0,0,0,0,0,0,1,1,0,0,0,0]
		]
	},
	"30P5H2V0":{
		width:13,
		height:11,
		build:[
			[0,0,0,0,1,0,0,0,0,0,0,0,0],
			[0,0,0,1,1,1,0,0,0,0,0,0,0],
			[0,0,1,1,0,1,1,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0,0,0,0,0],
			[0,1,0,1,0,1,0,1,0,0,1,0,0],
			[1,1,0,0,0,1,0,0,0,1,1,1,0],
			[1,1,0,0,0,1,0,0,0,0,0,0,1],
			[0,0,0,0,0,0,0,0,0,0,1,0,1],
			[0,0,0,0,0,0,0,0,1,0,1,0,0],
			[0,0,0,0,0,0,0,0,0,1,0,0,1],
			[0,0,0,0,0,0,0,0,0,0,0,0,1]
		]
	},
	"copperhead":{
		width:8,
		height:12,
		build:[
			[0,1,1,0,0,1,1,0],
			[0,0,0,1,1,0,0,0],
			[0,0,0,1,1,0,0,0],
			[1,0,1,0,0,1,0,1],
			[1,0,0,0,0,0,0,1],
			[0,0,0,0,0,0,0,0],
			[1,0,0,0,0,0,0,1],
			[0,1,1,0,0,1,1,0],
			[0,0,1,1,1,1,0,0],
			[0,0,0,0,0,0,0,0],
			[0,0,0,1,1,0,0,0],
			[0,0,0,1,1,0,0,0]
		]
	},
	"mosquito":{
		width:5,
		height:18,
		build:[
			[0,1,1,1,1],
			[1,0,0,0,1],
			[0,0,0,0,1],
			[0,0,0,1,0],
			[0,0,0,0,0],
			[0,0,0,0,0],
			[0,1,0,0,0],
			[0,0,1,0,0],
			[0,0,1,0,0],
			[0,1,1,0,0],
			[1,0,0,0,0],
			[0,0,0,0,0],
			[0,0,0,0,0],
			[0,0,0,0,0],
			[0,1,1,1,1],
			[1,0,0,0,1],
			[0,0,0,0,1],
			[0,0,0,1,0]
		]
	},
	"OCT":{
		width:39,
		height:1,
		build:[
			[1,1,1,1,1,1,1,1,0,1,1,1,1,1,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,1,1,1,1,0,1,1,1,1,1]
		]
	},
	"LWSS":{
		width:5,
		height:4,
		build:[
			[0,1,0,0,1],
			[1,0,0,0,0],
			[1,0,0,0,1],
			[1,1,1,1,0]
		]
	}
}
function saverange(xs,ys,xe,ye){
	let xl=xe-xs+1,yl=ye-ys+1;
	let dt=new Array(yl).fill().map(e=>new Array(xl))
	for(let y=0;y<yl;y++)for(let x=0;x<xl;x++)dt[y][x]=cells[y+ys][x+xs];
	return{width:xl,height:yl,build:dt};
}
function loadset(name,x,y){
	if(!name)name=Object.keys(sets)[Math.random()*Object.keys(sets).length|0]
	let selected=sets[name];
	if(selected.width>0&&selected.width<size){
		let l1=selected.height,l2=selected.width;
		for(let i=0;i<l1;i++)for(let j=0;j<l2;j++)cells[i+y][j+x]=selected.build[i][j];
	}
}
function fill(xs,ys,xe,ye,t){
	let xl=xe-xs+1,yl=ye-ys+1;
	for(let y=0;y<yl;y++)for(let x=0;x<xl;x++)cells[y+ys][x+xs]=t;
}
function init(){
	instances=[];
	cells=new Array(size).fill().map(e=>new Array(size).fill(0));
	tmp=new Array(size).fill().map(e=>new Array(size).fill(0));
	start=stbtn.checked=false;
	cells.forEach((a,i)=>a.forEach((b,j)=>instances.push(new Cell(j,i))));
}
cvs.addEventListener("click",e=>{
	let pixel=cvs.width/size;
	let x=e.clientX/pixel|0,y=e.clientY/pixel|0;
	cells[y][x]=(cells[y][x]+1)%2;
});
cvs.addEventListener("mousemove",e=>{
	let pixel=cvs.width/size;
	let x=e.clientX/pixel|0,y=e.clientY/pixel|0;
	coords.innerText="x: "+x+", y: "+y
});
function set(n,v){
	switch(n){
	case"gsz":
		if(v>=10&&v<=500){
			size=v;
			init();
		}
	break;
	case"tps":
		if(v<=1000)tickdelay=v;
	break;
	case"gpt":
		if(v>0&&v<=10)gens=v;
	break;
	}
}
function nextGen(){
	for(let i=0;i<size**2;i++)instances[i].next();
	for(let i=0;i<size;i++){
		cells[i]=[...tmp[i]];
		for(let j=0;j<size;j++)tmp[i][j]=0;
	}
}
function draw(){
	let pixel=cvs.width/size;
	ctx.clearRect(0,0,cvs.width,cvs.width);
	for(let i=0;i<size;i++)for(let j=0;j<size;j++){
		ctx.fillStyle=cells[i][j]?"#fff":"#000";
		ctx.fillRect(pixel*j,pixel*i,pixel,pixel);
	}
	requestAnimationFrame(draw);
}
function running(){
	if(start)for(let i=0;i<gens;i++)nextGen();
	setTimeout(running,tickdelay);
}
init();
running();
draw();
function convert(txt){
	let yp=0;
	let width=0;
	let cw=0;
	let arr=[[]];
	for(let i=0;i<txt.length;i++){
		let c=txt[i];
		if(isNaN(c)){
			let ys=1;
			if(!isNaN(txt[i-1])){
				let n="";
				for(let j=i-1;!isNaN(txt[j]);j--)n=txt[j]+n
				ys=Number(n);
			}
			if(c=="$"){
				while(ys--){
					yp++;
					arr.push([]);
				}
				if(cw>width)width=cw;
				cw=0;
			}else{
				arr[yp].push(...new Array(ys).fill(c=="b"?0:1));
				cw+=ys;
			}
		}
	}
	arr.forEach((e,i)=>{
		while(e.length<width)arr[i].push(0);
	})
	console.log({width:width,height:yp+1,build:arr})
}
convert("")
//optimize using logic
		</script>
	</body>
</html>